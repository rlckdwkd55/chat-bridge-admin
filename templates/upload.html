{% extends "layout.html" %}
{% block title %}임베딩 파일 업로드 목록{% endblock %}

{% block head %}
<script src="/static/js/upload.js" defer></script>
{% endblock %}

{% block content %}
<main>
    <header class="header">
        <div>
            <h2>임베딩 파일 업로드</h2>
            <p>임베딩할 파일을 업로드하고 관리할 수 있습니다.</p>
        </div>
        <button class="add-btn" id="add-btn">＋</button>
    </header>

    <section class="actions">
        <div class="info">
            총 <span id="total-count">{{ count }}</span>개 파일
        </div>
        <div class="actions-right">
            <button class="primary-btn" id="embed-all-btn">
                임베딩
            </button>
        </div>
    </section>

    <div class="table-container">
        <table class="table">
            <thead>
            <tr>
                <th>파일명</th>
                <th>업로드 일시</th>
                <th>상태</th>
                <th>작업</th>
            </tr>
            </thead>
            <tbody>
            {% if files %}
            {% for f in files %}
            <tr>
                <td>{{ f.name }}</td>
                <td>{{ f.uploaded_at }}</td>
                <td>{{ f.status }}</td>
                <td>
                    <button
                            class="table-btn table-btn-sm table-btn-danger"
                            data-action="delete"
                            data-filename="{{ f.name }}"
                    >
                        삭제
                    </button>
                </td>
            </tr>
            {% endfor %}
            {% else %}
            <tr>
                <td colspan="4" class="table-empty">
                    업로드된 파일이 없습니다.
                </td>
            </tr>
            {% endif %}
            </tbody>
        </table>
    </div>

    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="spinner"></div>
        <p>임베딩 중입니다...</p>
    </div>

    <input type="file" id="file-input" style="display: none;">
</main>
{% endblock %}
